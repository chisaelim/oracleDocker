<!DOCTYPE html>
<html>
<head>
    <title>AJAX Debug Test</title>
</head>
<body>
    <h3>AJAX Endpoint Test</h3>
    <button onclick="testSalesReport()">Test Sales Report AJAX</button>
    <div id="result" style="background: #f5f5f5; padding: 10px; margin: 10px 0; white-space: pre-wrap;"></div>

    <script>
    function testSalesReport() {
        const resultDiv = document.getElementById('result');
        resultDiv.textContent = 'Testing...';
        
        const url = 'reports.php?action=sales_report&start_date=2025-01-01&end_date=2025-12-31';
        console.log('Testing URL:', url);
        
        fetch(url)
            .then(response => {
                console.log('Response status:', response.status);
                console.log('Response headers:', response.headers);
                return response.text();
            })
            .then(text => {
                console.log('Raw response:', text);
                resultDiv.textContent = 'Raw Response:\n' + text + '\n\n';
                
                try {
                    const data = JSON.parse(text);
                    resultDiv.textContent += 'Parsed JSON:\n' + JSON.stringify(data, null, 2);
                } catch (e) {
                    resultDiv.textContent += 'JSON Parse Error: ' + e.message;
                }
            })
            .catch(error => {
                console.error('Fetch error:', error);
                resultDiv.textContent = 'Fetch Error: ' + error.message;
            });
    }
    
    // Auto-run test
    window.onload = function() {
        testSalesReport();
    };
    </script>
</body>
</html>